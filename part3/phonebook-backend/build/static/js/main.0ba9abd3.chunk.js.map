{"version":3,"sources":["components/PersonForm.js","components/Persons.js","components/Filter.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["PersonForm","props","onSubmit","addPerson","value","newName","onChange","handleNewName","newNumber","handleNewNumber","type","Persons","persons","handleDelete","map","person","key","id","name","number","onClick","Filter","newSearch","handleSearch","Notification","notification","className","message","baseurl","axios","get","then","response","data","newPerson","post","put","delete","App","useState","setPersons","setNewName","setNewNumber","setSearch","setNotification","useEffect","personService","initialPersons","notifyWith","setTimeout","filteredPerson","length","filter","p","toLowerCase","indexOf","event","target","console","log","preventDefault","existing","find","window","confirm","returnedPerson","catch","error","addedPerson","concat","toDelete","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.0ba9abd3.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\n// const PersonForm = ({\r\n//   addPerson,\r\n//   newName,\r\n//   handleNewName,\r\n//   newNumber,\r\n//   handleNewNumber,\r\n// }) => {\r\n\r\n// if too many props \r\n\r\nconst PersonForm = (props) => {\r\n\r\nreturn (\r\n    <form onSubmit={props.addPerson}>\r\n      <div>\r\n        name: <input value={props.newName} onChange={props.handleNewName} />\r\n      </div>\r\n      <div>\r\n        number: <input value={props.newNumber} onChange={props.handleNewNumber} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default PersonForm\r\n","import React from \"react\";\r\n\r\n\r\n// const Person = ({ person, handleDelete }) => (\r\n//   <div>\r\n//     {person.name} {person.number}\r\n//     <button onClick={handleDelete}> delete </button>\r\n//   </div>\r\n// )\r\n\r\nconst Persons = ({ persons, handleDelete }) => {\r\n  return (\r\n    persons.map(person =>\r\n      <p key = {person.id}>\r\n        {person.name} {person.number}\r\n        <button onClick={() => handleDelete(person.id)}> delete </button>\r\n      </p>      \r\n    )\r\n  )\r\n}\r\n\r\nexport default Persons\r\n\r\n\r\n\r\n","import React from \"react\";\r\n\r\nconst Filter = ({ newSearch, handleSearch }) => {\r\n  return (\r\n  <div>\r\n    filter shown with <input value={newSearch} onChange={handleSearch} />\r\n  </div>\r\n) \r\n}\r\n\r\nexport default Filter;\r\n","import React from 'react'\r\n\r\n// for the errors\r\nconst Notification = ({notification}) => {\r\n  if (notification === null) {\r\n    return null \r\n  }\r\n  return (\r\n    <div className={notification.type}>\r\n      {notification.message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Notification","import axios from 'axios'\r\n// const baseurl = 'http://localhost:3001/persons'\r\n// const baseurl = 'http://localhost:3001/api/persons'\r\n// const baseurl = 'https://secure-fortress-36661.herokuapp.com/api/persons'\r\nconst baseurl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseurl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = (newPerson) => {\r\n  const request = axios.post(baseurl, newPerson)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newPerson) => {\r\n  const request = axios.put(`${baseurl}/${id}`, newPerson)\r\n  return request.then(response => response.data)\r\n}\r\n\r\n// changes here \r\nconst remove = (id) => {\r\n  const request = axios.delete(`${baseurl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\n\r\nexport default { getAll, create, update, remove }","// (frontend) run guide --------------\r\n// [x] start the server\r\n// [] start the node project\r\n\r\n\r\nimport React, { useState, useEffect } from \"react\"\r\n\r\nimport PersonForm from \"./components/PersonForm\"\r\nimport Persons from \"./components/Persons\"\r\nimport Filter from \"./components/Filter\"\r\nimport Notification from \"./components/Notification\"\r\n\r\nimport personService from \"./services/persons\"\r\nimport \"./index.css\"\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([])\r\n  const [newName, setNewName] = useState(\"\")\r\n  const [newNumber, setNewNumber] = useState(\"\")\r\n  const [newSearch, setSearch] = useState(\"\")\r\n  const [notification, setNotification] = useState(null)\r\n\r\n  useEffect(() => {\r\n    personService\r\n      .getAll()\r\n      .then((initialPersons) => {\r\n      setPersons(initialPersons)\r\n    })\r\n  }, [])\r\n\r\n  // why not inside ({message, type='success'})\r\n  const notifyWith = (message, type = \"success\") => {\r\n    // this was the secret\r\n    setNotification({ message, type })\r\n    setTimeout(() => {\r\n      setNotification(null)\r\n    }, 3000)\r\n  }\r\n\r\n  const handleNewName = (event) => {\r\n    console.log(event.target.value)\r\n    setNewName(event.target.value)\r\n  }\r\n  const handleNewNumber = (event) => {\r\n    console.log(event.target.value)\r\n    setNewNumber(event.target.value)\r\n  }\r\n  const handleSearch = (event) => {\r\n    setSearch(event.target.value)\r\n    console.log(event.target.value)\r\n  }\r\n\r\n  const handleDelete = (id) => {\r\n    const toDelete = persons.find(p => p.id === id)\r\n    if (window.confirm(`Delete ${toDelete.name} ?`)) {\r\n      personService.remove(id)\r\n        .then((response) => {\r\n          // updating diff\r\n          setPersons(persons.filter(p => p.id !== id))\r\n          notifyWith(`Deleted ${toDelete.name}`)\r\n        }).catch(() => {\r\n          const message = `${toDelete.name} has already been removed`\r\n          notifyWith(message, \"error\")\r\n        })\r\n    }\r\n  }\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n    const newPerson = {\r\n      name: newName,\r\n      number: newNumber,\r\n    }\r\n\r\n    const existing = persons.find(p => p.name === newName)\r\n    \r\n    if (existing) {\r\n      if (window.confirm(\r\n        `${newName} is already added to phonebook, replace the old number with new one?`)) {\r\n          personService.update(existing.id, newPerson)\r\n            .then((returnedPerson) => {\r\n              // wut this ?? \r\n              setPersons(persons.map(p => p.id !== existing.id ? p : returnedPerson))\r\n              notifyWith(`Number changed to ${returnedPerson.number}`)\r\n              setNewName(\"\")\r\n              setNewNumber(\"\")\r\n            }).catch((error) => {\r\n              // update errors\r\n              console.log(error.response.data.error)\r\n              notifyWith(`${error.response.data.error}`, \"error\")\r\n            })\r\n      }\r\n    } else {\r\n      // console.log(\"button clicked\", event.target)\r\n      personService\r\n        .create(newPerson)\r\n        .then((addedPerson) => {\r\n          notifyWith(`Added ${addedPerson.name}`)\r\n          setPersons(persons.concat(addedPerson))\r\n          setNewName(\"\")\r\n          setNewNumber(\"\")\r\n        }).catch((error) => {\r\n          // dunno how to test this \r\n          console.log(error.response.data.error)\r\n          notifyWith(`${error.response.data.error}`, \"error\")\r\n        })\r\n    }\r\n  }\r\n\r\n  const filteredPerson = newSearch.length === 0 ?\r\n    persons :\r\n    persons.filter(p => p.name.toLowerCase().indexOf(newSearch.toLowerCase()) > 0)\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n\r\n      <Notification notification={notification} />\r\n\r\n      <Filter newSearch={newSearch} handleSearch={handleSearch} />\r\n\r\n      <h2>add a new human</h2>\r\n\r\n      <PersonForm\r\n        addPerson={addPerson}\r\n        newName={newName}\r\n        handleNewName={handleNewName}\r\n        newNumber={newNumber}\r\n        handleNewNumber={handleNewNumber}\r\n      />\r\n\r\n      <h2>Numbers</h2>\r\n\r\n      <Persons persons={filteredPerson} handleDelete={handleDelete} />\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","//\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}